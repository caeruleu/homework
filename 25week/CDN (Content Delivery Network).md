# CDN (Content Delivery Network)

CDN используется для быстрой загрузки тяжелых сайтов. Это специальная структура, распределенная по всему миру таким образом, чтобы сделать время ответа для пользователя минимальным.

Как устроена передача данных на обычном хостинге:

1. Клиент (то есть браузер пользователя) запрашивает контент у сервера, на котором хранятся данные.
2. Сервер обрабатывает запрос и передаёт пакет данных в ответ.
3. Сайт благополучно загружается.

CDN-хостинг добавляет ещё один этап — серверы, на которых кешируется часть контента или страница целиком. Они находятся между основным сервером и конечным пользователем, хранят информацию разных сайтов для быстрой загрузки и передают её друг другу.

На скорость загрузки веб-страницы и её содержимого сильно влияет то, насколько далеко пользователь находится от сервера. Чем больше маршрутизаторов должен пройти сигнал чтобы достигнуть пользователя, тем длиннее будут задержки. Размещение содержимого на нескольких рассредоточенных серверах средствами CDN сокращает маршрут сигнала и делает загрузку сайта и скачивание содержимого быстрее для пользователя. Также таким способом добиваются отсутствия скачков скорости загрузки. 

CDN могут автоматически контролировать целостность данных на каждом сервере. При этом если выйдет из строя один из серверов, то пользователь все равно сможет получить данные. DDoS атака на один сервер тоже не станет препятствием для доступа пользователя к содержимому сайта.

Но CDN не работает с динамическим содержимым (это то содержимое, которое у каждого пользователя уникально, например местоположение, блок рекомендаций, история просмотра) - он просто обращается к исходному серверу. Так что удобно ее использовать, если на сайте есть тяжелые статические объекты, например фото, видео, аудио, скрипты. 

Кому не обойтись без CDN:

- Крупным интернет-магазинам с аудиторией в разных регионах.
- Стриминговым сервисам.
- Игровым порталам.
- Компаниям, у которых есть мобильное приложение (для этого случая есть специальные Mobile CDNs, ориентированные на раздачу контента на мобильные устройства).

Еще одна проблема, с которой могут столкнуться использующие CDN веб-сервисы ― это задержки кэширования. Так на основном сервере файл был изменён, а на кэширующих серверах он всё ещё будет лежать в неизмененном виде. Это особенно важно, когда через CDN распространяется часто обновляемый контент (фотографии с места событий, новые версии ПО и так далее). Чтобы обеспечить доставку «свежего» контента в современных CDN имеется функция очистки кэша. После очистки CDN подгрузит с сервера актуальную версию.